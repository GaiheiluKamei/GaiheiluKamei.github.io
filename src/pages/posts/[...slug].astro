---
import { getCollection } from 'astro:content'
import Post from '../../layouts/Post.astro'

export async function getStaticPaths() {
    const posts = await getCollection('posts', ({data}) => {return data.publishedAt !== undefined})
    if (posts === undefined || posts.length === 0 ){
        return []
    }

    return posts.map(post => ({
        params: { slug: post.slug },
        props: post,
    }))
}

const post = Astro.props
const { Content } = await post.render()
---
<Post title={post.data.title} publishedAt={post.data.publishedAt}>
    <Content />
</Post>
